<html>
    <head>
        <title>Crocodile Hunter: {{name}} </title>
        <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    </head>
    <body>
        <h1>Crocodile Hunter</h1>
        <h2>Project: {{name}}</h2>
        <div id="map"></div>
        <script>
          var map;
          function initMap() {
            var bounds = new google.maps.LatLngBounds();
            var centroid = new google.maps.LatLng({{trilat_pts[0][0]}}, {{trilat_pts[0][1]}});
            map = new google.maps.Map(document.getElementById('map'), {
              center: centroid,
              zoom: 15
            });

            var point;
            var points = [];
            var opacity = 0.2
            {% for t in known_towers %}
                point = new google.maps.LatLng({{t.lat}}, {{t.lon}});
                new google.maps.Marker({position: point, map: map, title:"{{t.description}}", icon:"http://icons.iconarchive.com/icons/icons8/windows-8/24/Industry-Radio-Tower-icon.png"});
                new google.maps.Circle({
                  strokeColor: '#000000',
                  strokeOpacity: 1,
                  strokeWeight: 1,
                  fillColor: '#00FF00',
                  fillOpacity: 0.5,
                  map: map,
                  center: point,
                  radius: 100
                });
            {% endfor %}
            {% for t in trilat_pts %}
              // Don't display towers which have no GPS data attached
                point = new google.maps.LatLng({{t[0]}}, {{t[1]}});
                new google.maps.Marker({position: point, map: map, title:"{{t[2]}}" });
                points.push(point);
                new google.maps.Circle({
                  strokeColor: '#000000',
                  strokeOpacity: 1,
                  strokeWeight: 1,
                  fillColor: '#FF0000',
                  fillOpacity: opacity,
                  map: map,
                  center: point,
                  radius: 100
                });
            {% endfor %}
            for (let p of points) {
              bounds.extend(p);
            }
            map.fitBounds(bounds);
          }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAaSz9Z1-Gx8qwbCF7krj76K4l7msf-eHA&callback=initMap"
        async defer></script>
    </body>
</html>


